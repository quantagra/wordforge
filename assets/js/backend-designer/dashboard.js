function brfFindClosestAnchor(t){for(;t;){if("A"===t.tagName)return t;t=t.parentElement}return null}function brfHandlePostBoxes(){let t=document.querySelectorAll(".postbox-container");for(var n=0;n<t.length;n++){var e=t[n];e.querySelector("#brf_custom_dashboard")||e.parentNode.removeChild(e)}}window.onload=function(){var t=document.querySelector("#brf_custom_dashboard iframe");"default"===dashboardSettings.linkHandling&&t.contentWindow.document.addEventListener("click",(function(t){const n=brfFindClosestAnchor(t.target);n&&(t.preventDefault(),window.parent.location.href=n.href)})),brfHandlePostBoxes(),t.contentWindow.document.body.addEventListener("click",(function(n){const e=brfFindClosestAnchor(n.target);if(e&&"_blank"!==e.getAttribute("target")&&"default"!==dashboardSettings.linkHandling){n.preventDefault();const o=new URL(e.href);o.searchParams.append("backend","true"),t.contentWindow.location=o.toString()}})),t.addEventListener("load",(function(){let n=document.querySelector("#adminmenuback").getBoundingClientRect().width;t.style.width="calc(100vw - "+n+"px)",brfHandlePostBoxes(),t.contentWindow.document.body.addEventListener("click",(function(n){const e=brfFindClosestAnchor(n.target);if(e&&"_blank"!==e.getAttribute("target")&&"default"!==dashboardSettings.linkHandling){n.preventDefault();const o=new URL(e.href);o.searchParams.append("backend","true"),t.contentWindow.location=o.toString()}}))}))};